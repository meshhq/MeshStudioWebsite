<!DOCTYPE html>
<html lang="en-us">

<!DOCTYPE html>
<html lang="en-us">

<head>
    
    <link rel="shortcut icon" href="https://meshstudio.io/images/site/favicon/favicon.png">
    <link rel="apple-touch-icon" href="https://meshstudio.io/images/site/favicon/favicon.png" />

    
    <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<meta property="og:title" content=" Intro to Docker with TypeScript &middot;  Mesh Studio" />
<meta property="og:site_name" content="Mesh Studio" />
<meta property="og:url" content="https://meshstudio.io/blog/2017-12-13-intro-to-docker-with-typescript/" />


<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:domain" value="meshstudio.io" />
<meta name="twitter:title" value="Mesh Studio" />
<meta name="twitter:description" value="We‚Äôre Mesh, a Seattle based software development consultancy. We help innovative companies ship incredible software products." />
<meta name="twitter:image" content="https://meshstudio.io/images/site/twitter_logo.jpg">
<meta name="twitter:url" value="https://meshstudio.io/" />
<meta name="twitter:label1" value="Cloud Development" />
<meta name="twitter:label2" value="Application Development" />


  <meta property="og:type" content="article" />

<meta property="og:article:published_time" content="2017-12-13T00:00:00Z" />


<meta property="og:article:tag" content="Docker" />

<meta property="og:article:tag" content="Typescript" />

<meta property="og:article:tag" content="Tutorial" />

<meta property="og:article:tag" content="Servers" />

<meta property="og:article:tag" content="Cloud Service" />




  <meta property="og:image" content="/images/blog/2017-12-13-intro-to-docker-with-typescript/docker-typescript-hero.png" />


<title>
 Intro to Docker with TypeScript &middot;  Mesh Studio
</title>

<meta name="description" content="We‚Äôre Mesh, a Seattle based software development consultancy. We help innovative companies ship incredible software products." />

<meta name="HandheldFriendly" content="True" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

    

    <link rel="apple-touch-icon" sizes="57x57" href="/images/site/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/images/site/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/images/site/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/images/site/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/images/site/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/images/site/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/images/site/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/images/site/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/site/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/images/site/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/images/site/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/images/site/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/site/favicon/favicon-16x16.png">
<link rel="manifest" href="/images/site/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
    
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://meshstudio.io/css/main.css" />
    <link rel="stylesheet" href="https://use.typekit.net/qxb4anb.css">
    <link rel="stylesheet" type="text/css" href="https://cloud.typography.com/6268016/6917392/css/fonts.css" />

    
    
      
          <link href="https://meshstudio.io/index.xml" rel="alternate" type="application/rss+xml" title="Mesh Studio" />
      
      
    
    <meta name="generator" content="Hugo 0.35" />

    <link rel="canonical" href="https://meshstudio.io/blog/2017-12-13-intro-to-docker-with-typescript/" />

</head>
<body class="nav-closed">

  <div class="container" id="container">
    <nav class="navbar navbar-expand-md navbar-light mt-5">

        
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        
        <a class="navbar-brand" href="https://meshstudio.io/">
            <img class="img-fluid main-logo" src="/images/site/meshlogo-black-vector.svg" alt="Home" />
        </a>

        
        <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
            <form class="form-inline ml-auto my-2 my-lg-0">
                <ul class="navbar-nav">
                    
                     
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/work/">Work</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/services/">Services</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/about/">About</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://mesh.workable.com/">Join Us</a>
                    </li>
                    
                    <li class="nav-item active">
                        <a class="nav-link" href="/blog/">Blog</a>
                    </li>
                    
                </ul>
            </form>
        </div>

    </nav>
</div>



<body class="nav-closed">
    <img class="seattle-rain" src="/images/site/rain.svg" alt="Home" />
    <main id="content" class="content" role="main">

        

<div class="blog-post">
    <div class="hero">
        <div class="container">
            <div class="row d-flex flex-row align-items-center justify-content-center">
                <div class="row justify-content-center hero-title-block">
    <div class="col-12">
        <div class="d-flex justify-content-center">
            <h2>Intro to Docker with TypeScript</h2>
        </div>
    </div>
    <div class="col-12 mt-2">
        <div class="d-flex justify-content-center">
            <h3>How to set up and run a Docker Container of a TypeScript application.</h3>
        </div>
    </div>
</div>
            </div>
        </div>
    </div>

    <div class="primary-section">
        <div class="hero-container d-flex justify-content-center">
            <img class="img-fluid" src="/images/blog/2017-12-13-intro-to-docker-with-typescript/docker-typescript-hero.png" />
        </div>
        
        <div class="container post-container">
                    
            <div class="row blog-meta-row">
                <div class="col-12 col-sm-12 col-lg-8 offset-lg-2">
                    <header class="meta-header d-flex flex-row align-items-center">
                        <div class="author-picture mr-3">
                            <a class="founder-twitter ml-2 mb-5" href="https://medium.com/@reidweber_34407">
                                <img class="img-fluid author-pic rounded-circle" src="https://avatars2.githubusercontent.com/u/8824846?s=460&amp;v=4" />
                            </a>
                        </div>
                        <div class="author-meta">
                            <p class="post-meta author-name">Reid Weber</p>
                            <p class="post-meta post-date">Dec 13 | 8 min read</p>
                            <p class="post-meta post-words">1700 Words</p>
                        </div>
                    </header>
                </div>
            </div>
            <div class="row blog-content-row">
                <div class="col-12 col-sm-12 col-lg-8 offset-lg-2">
                    <article class="post">
                        

<h2 id="intro-to-docker-with-typescript">Intro to Docker with TypeScript</h2>

<p>Over the past few years Docker has emerged as one of the most efficient ways to manage and deploy cloud-based web applications‚òÅÔ∏è üíª¬†. While containers have been around since 2008, Docker helped them go mainstream, fueling the Virtual Machine vs. Container argument.</p>

<h3 id="what-are-docker-containers-and-why-should-i-care">What are Docker Containers? (and why should I care?)</h3>

<p>In short, a container is an operating system agnostic environment that hosts a fully functional application. Docker uses a virtual machine under the hood which allows developers to declare runtime dependencies via a Dockerfile.</p>

<p>Prior to Docker, developers were forced to manually bootstrap runtime dependencies in order to leverage a virtual machine. In contrast, a container ships with its runtime specified. In fact, a container is intended to be comprised of only its runtime dependencies and the application code. We‚Äôll talk a bit more later about how your Docker parent image will allow you to create containers that already have dependencies like Node and Typescript installed.</p>

<p>A container is able to ship without a dedicated operating system since the container‚Äôs VM will handle all the operating system translation needed. Developers can rest assured that their applications will run the same, regardless of the local machine‚Äôs operating system or specifications.</p>

<p>For more info (and nifty graphics) go <a href="https://docs.docker.com/get-started/">here</a>.</p>

<h3 id="getting-started">Getting Started</h3>

<p>First you‚Äôll have to go thru the installation process. Click the following for <a href="https://docs.docker.com/docker-for-mac/install/">macOS</a> or <a href="https://docs.docker.com/docker-for-windows/install/">Windows</a>.</p>

<p><strong>Note: You may have noticed the different pages in the docs for Docker CE and Docker EE. This is the Docker Community Edition vs. the Enterprise Edition. For this tutorial we don‚Äôt need to worry about EE. For the CE there are two options: stable and edge. We‚Äôll be using stable since we aren‚Äôt going worry about the latest and greatest features being built out by the community (See the Docker CE repo here).</strong></p>

<p>Once you have Docker installed, make sure the Docker application is running by checking for the little whale on your top bar (I‚Äôm using a mac for this tutorial).</p>

<table>
<thead>
<tr>
<th align="center"><img src="/images/blog/2017-12-13-intro-to-docker-with-typescript/docker-running.png" alt="See if Docker is running." /></th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">If Docker is not running and you try to run a Docker command, you‚Äôll get an error in the console that looks like this: ‚Äúdocker: Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?.‚Äù</td>
</tr>
</tbody>
</table>

<p>If you don‚Äôt have a Docker account, sign up at <a href="https://cloud.docker.com/">cloud.docker.com</a>. Then run <code>docker login</code> and enter your basic auth credentials.</p>

<p>Pull up the command line and run <code>docker run hello-world</code>; you should get this output:</p>

<pre><code>Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://cloud.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/engine/userguide/
</code></pre>

<p>What we‚Äôre doing here is fetching the <code>hello-world</code> image from DockerHub and running it on our local machine. This image is pretty basic since its only command is to print out the info above to the console (the exact steps are outlined in the above output).</p>

<p>Now let‚Äôs run a different, more complex, image. Run <code>docker run -it ubuntu bash</code>. This will pull the latest Ubuntu image and run it as a container on your machine. The <code>bash</code> argument at the end of the command allows us to open a command line session inside the new container we created. You can now issue commands to the new container from your existing console. If you run <code>uname</code> you can see that the console prints <code>&quot;Linux&quot;</code>‚Ää‚Äî‚Ääthis means that your container is now running on the Docker VM (which has a virtual Linux kernel). Exit the Ubuntu shell by typing exit and pressing enter. If you run <code>uname</code> again, you‚Äôll now see the ‚Äúreal‚Äù kernel type your machine is running on (in my case it‚Äôs <code>&quot;Darwin&quot;</code>).</p>

<h3 id="creating-the-dockerfile">Creating the Dockerfile</h3>

<p>Next we‚Äôre going to walk thru setting up a Dockerfile for a (very) simple web application that we will turn into a docker image that can be pulled and run on any local operating system. The Dockerfile defines and builds your image to run in a container. You‚Äôll define your parent image, create a working directory in the container, and define build commands. You can see all of the possible commands you can execute in the Dockerfile <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/">here</a>.</p>

<p><strong>Note: We‚Äôre going to use a bare-bones TypeScript server that you can access <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/">here</a>. Clone it to your local machine with: <code>git clone git@github.com:Reidweb1/TypeScriptStarter.git</code> or download the zip.</strong></p>

<p>Navigate into your application‚Äôs directory and run <code>touch Dockerfile</code>. Then go ahead copy the code below into your <code>Dockerfile</code>. We‚Äôll walk through each line below.</p>
<div class="highlight"><pre class="chroma"><code class="language-Dockerfile" data-lang="Dockerfile"><span class="c"># Docker Parent Image with Node and Typescript</span><span class="err">
</span><span class="err"></span><span class="k">FROM</span><span class="s"> reidweb1/node-typescript:1.0.0</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="c"># Create Directory for the Container</span><span class="err">
</span><span class="err"></span><span class="k">WORKDIR</span><span class="s"> /app</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="c"># Copy the files we need to our new Directory</span><span class="err">
</span><span class="err"></span><span class="k">ADD</span><span class="s"> . /app</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="c"># Expose the port outside of the container</span><span class="err">
</span><span class="err"></span><span class="k">EXPOSE</span><span class="s"> 3000</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="c"># Grab dependencies and transpile src directory to dist</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> npm install <span class="o">&amp;&amp;</span> tsc<span class="err">
</span><span class="err">
</span><span class="err"></span><span class="c"># Start the server</span><span class="err">
</span><span class="err"></span><span class="k">ENTRYPOINT</span><span class="s"> [&#34;node&#34;, &#34;dist/&#34;]</span></code></pre></div>
<p><strong>Note: Your local Dockerfile should NOT have a .txt extension. Your Dockerfile should have a blank file extension (gist doesn‚Äôt allow null file extensions so this one has a .txt).</strong></p>

<p>Below is a brief explanation of each consequential line in this file.</p>

<p><code>FROM reidweb1/node-typescript:1.0.0</code></p>

<p>This line defines a different docker image as our parent image. This means that our image will be ‚Äústacked‚Äù on top of reidweb1/node-typescript:1.0.0. We need this so the lightweight operating system our container will ship with (Ubuntu) is pre-installed with Typescript and Node.</p>

<p><code>WORKDIR /app</code></p>

<p>This creates a new directory in our Linux container where we‚Äôll move all of the files that will make our app run.</p>

<p><code>ADD . /app</code></p>

<p>This copies all the files in our current directory to the app directory we created above.</p>

<p><code>EXPOSE 3000</code></p>

<p>Since we are running our app on port 3000 (see line 5 in index.ts) we need to expose the port 3000 on our container to any listeners. In this case‚Ää‚Äî‚Ääwe‚Äôre only exposing port 3000 since we‚Äôre only serving HTTP content. Later on, we‚Äôll map the container‚Äôs exposed port 3000 to a listener, localhost:3000, in order to run our application.</p>

<p><code>RUN npm install &amp;&amp; tsc</code></p>

<p>RUN will execute given commands to set up the container. We‚Äôre first going to run npm install to pull in all the dependencies defined in our package.json. Then we‚Äôll run tsc to transpile our Typescript code in the src directory to Javascript that will live in the dist directory.</p>

<p><code>ENTRYPOINT [&quot;node&quot;, &quot;dist/&quot;]</code></p>

<p>This tells the container to run node dist/ once it‚Äôs up and running.</p>

<p>You‚Äôre bound to run into Dockerfiles that will use <code>CMD</code> instead of <code>ENTRYPOINT</code>. The difference is <code>CMD</code> is much easier to override when running a Docker image. So if you want flexibility with what your container does after it‚Äôs instantiated, using <code>CMD</code> is better. For our purposes, we want node dist/ to be the only option; so we‚Äôre using <code>ENTRYPOINT</code>.</p>

<p>For more info on Dockerfile commands you can checkout their docs.</p>

<h2 id="build-and-share-your-image">Build and Share your Image</h2>

<p>Now that we have all the components ready to go, it‚Äôs time to build our Docker image. Make sure you‚Äôre in your application‚Äôs directory and <code>run docker build -t dockertsc ..</code> This will build a Docker image with the contents of your current directory and add a human-readable local repository name (in our case it‚Äôs dockertsc).</p>

<p>Now you can run docker images and you‚Äôll see your new image (id included) right at the top.</p>

<table>
<thead>
<tr>
<th align="center"><img src="/images/blog/2017-12-13-intro-to-docker-with-typescript/image-command.png" alt="Check the image id" /></th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">You‚Äôll also see the parent image ‚Äúreidweb1/node-typescript:1.0.0‚Äù since it was downloaded during the build phase.</td>
</tr>
</tbody>
</table>

<p>Now we can run our app locally using <code>docker run -p 4000:3000 dockertsc</code>. This command will map the container‚Äôs port 3000 (the one we exposed) to localhost:4000. You can now see your awesome HTML at localhost:4000. (You can also run curl <a href="http://localhost:4000.">http://localhost:4000.</a>) Control+C stops the application.</p>

<p><strong>From the Docker Docs: You may need to use the Docker Machine IP instead of localhost. For example, <a href="http://192.168.99.100.4000/">http://192.168.99.100.4000/</a>. To find the IP address, use the command docker-machine ip. The command would now look like this <code>docker run -p http://192.168.99.100.4000/:3000 dockertsc</code>.</strong></p>

<p>Just like remote code repositories - images can be hosted and cloned. Next we‚Äôre going to push our image to a remote repo so other folks can access it. If you don‚Äôt have a Docker account, sign up at cloud.docker.com. Then run docker login and enter your basic auth credentials.</p>

<p>The command to associate a local image with a remote repository is docker tag image username/repository:tag.</p>

<ul>
<li>The image part should be the local image name, in our case it‚Äôs dockertsc.</li>
<li>The username is your Docker username.</li>
<li>The repository is whatever you want to name your remote repository.</li>
<li>The tag is optional, but highly recommended.</li>
</ul>

<p><strong>Note: <code>tag</code> is a handy way for you to specify the difference between images stored in the same repo (very useful for versioning). It‚Äôs important to note that the default tag is <code>latest</code>.</strong></p>

<p>Now upload your new image to the remote with docker push image. Now the image is going to be the name (<code>username/repository</code>) of new image you just tagged (not the original image tagged <code>latest</code>). Use <code>docker images</code> to pull up all of your images to make sure you use the correct name.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Now you can run the remote image with <code>docker run -p 4000:80 username/repository:tag</code>. This will do the same thing as our <code>run</code> call above, but if it doesn‚Äôt find a local image, it will pull the tagged version from the remote repository.</p>

<p>Now you‚Äôre up and running with Docker! üö¢üê≥üö¢</p>

                    </article>
                </div>
            </div>
        </div>
    </div>

</div>



    </main>

</body>

<footer>
    
    <div class="get-in-touch-container">
    <div class="container">
        <div class="row get-in-touch">
            <div class="col-12 col-md-6 content-col d-flex flex-column justify-content-start align-items-center">
                <p class="get-in-touch-header mb-0">Ready to get started</p>
                <p class="get-in-touch-content">Let&#39;s talk about your project</p>
            </div>
            <div class="col-12 col-md-6 btn-col d-flex align-items-center">
                <button type="button" href="https://taylorhalliday.typeform.com/to/ji75xl" class="btn get-in-touch-btn typeform-share">get in touch</button>
            </div>
        </div>
    </div>
</div>
    <div class="container footer-container py-5" id="container">
        <div class="row">
            
            <div class="col">
                <a class="navbar-brand mb-5 mt-2" href="https://meshstudio.io/">
                    <img class="img-fluid main-logo" src="/images/site/meshlogo-white-vector.svg" alt="Home" />
                </a>
            </div>
        </div>
        <div class="row">

            
            <div class="col-6 col-md-3 footer-list">
                <h5>Contact</h5>
                <ul class="list-unstyled text-small">
                    <li>
                        3621 Stone Way N Suite G
                    </li>
                    <li>
                        Seattle, WA 98103
                    </li>
                    <li>
                        info@meshstudio.io
                    </li>
                </ul>
            </div>

            
            <div class="col-6 col-md-3 footer-list nav-list">
                <h5>Pages</h5>
                <ul class="list-unstyled text-small">

                    <ul class="footer-nav">
                        
                        <li class="nav-item">
                            <a class="nav-link pt-1 pb-1" href="/">Home</a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link pt-1 pb-1" href="/work/">Work</a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link pt-1 pb-1" href="/services/">Services</a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link pt-1 pb-1" href="/about/">About</a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link pt-1 pb-1" href="https://mesh.workable.com/">Join Us</a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link pt-1 pb-1" href="/blog/">Blog</a>
                        </li>
                        
                    </ul>
                </ul>
            </div>

            
            <div class="col-12 col-md-4 offset-md-2  footer-list">
                
            </div>
        </div>
    </div>
</footer>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>


<script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script>
<script src="/js/googleAnalytics.js"></script>
<script src="/js/typeform.js"></script>
<script src="/js/mailchimp.js"></script>


</html>